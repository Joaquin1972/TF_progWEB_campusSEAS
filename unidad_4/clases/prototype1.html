<!DOCTYPE html>
<html lang="es">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>JSON</title>
  <script>
    // Definición de la clase Cliente
    function Cliente(nombre, direccion, telefono, nif) {
      this.nombre = nombre;
      this.direccion = direccion;
      this.telefono = telefono;
      this.nif = nif;
    }
    // Definición de la clase Elemento
    function Elemento(descripcion, cantidad, precio) {
      this.descripcion = descripcion;
      this.cantidad = cantidad;
      this.precio = precio;
    }
    // Definición de la clase Factura
    function Factura(cliente, elementos) {
      this.cliente = cliente;
      this.elementos = elementos;
      this.informacion = {
        baseImponible: 0,
        iva: 16,
        total: 0,
        formaPago: "contado"
      };
    };
    // La información de la empresa que emite la factura se
    // añade al prototype porque se supone que no cambia
    Factura.prototype.empresa = {
      nombre: "Nombre de la empresa",
      direccion: "Direccion de la empresa",
      telefono: "900900900",
      nif: "XXXXXXXX"
    };
    // Métodos añadidos al prototype de la Factura
    Factura.prototype.calculaTotal = function () {
      for (var i = 0; i < this.elementos.length; i++) {
        this.informacion.baseImponible += this.elementos[i].cantidad *
          this.elementos[i].precio;
      }
      this.informacion.total = this.informacion.baseImponible + this.informacion.baseImponible *
        this.informacion.iva / 100;
    }
    Factura.prototype.muestraTotal = function () {
      this.calculaTotal();
      alert(this.cliente.nombre + ": TOTAL = " + this.informacion.total + " euros");
     }
    // Creación de una factura
    // creamos el cliente
    var elCliente = new Cliente("Pepe Perez", "", "", "");
    //creamos los elementos
    var losElementos = [new Elemento("elemento1", "1", "5"),
    new Elemento("elemento2", "2", "12"),
    new Elemento("elemento3", "3", "42")
    ];
    //creamos el objeto laFactura pasandole como paramentros las pseudoclases
    var laFactura = new Factura(elCliente, losElementos);
    // llamamos al metodo muestraTotal()
    laFactura.muestraTotal();
</script>






  <link rel='stylesheet' href='../css/style.css' type='text/css' media='screen' charset='utf-8' />
</head>

<body>
  <header>
    <h1>LENGUAJE JAVASCRIPT U5</h1>
  </header>

  <nav>
    <a href="../index.html">Volver a U5</a>
  </nav>
  <div class="principal">

    <h2>PROTOTYPE</h2>

    <DIV id="demo">Ver ejemplo de prototype en el código</DIV>

  </div>

</body>

</html>