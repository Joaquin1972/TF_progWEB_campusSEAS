<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>Ejercicio 1.3 - Limitar número de caracteres en textarea</title>
    <style type="text/css">
      body {
        font-family: arial, helvetica;
      }
    </style>
    <script type="text/javascript">
      function limita(elEvento, maximoCaracteres) {
        //limito a 100 caracteres
        var caracteres = document.getElementById("texto");
        //obtengo el numero de caracteres del campo textarea
        var num_caracteres = caracteres.value.length;
        //y lo comparo con el maximo de caracteres permitido
        if (num_caracteres >= maximoCaracteres) {
          return false;
        }
        //añado una mejora para que solo se puedan meter letras
        //creo un array de letras
        var caracteres = "abcdefghijklmnñopqrstuvwxyzABCDEFGHIJKLMNÑOPQRSTUVWXYZ";
        //leo el caracter
        var evento = elEvento || window.event;
        var codigoCaracter = evento.charCode || evento.keyCode
        var caracter = String.fromCharCode(codigoCaracter); 
        // si el caracter tecleado esta en el array caracteres será distinto a -1 y retornara true
        return caracteres.indexOf(caracter) != -1;

        //
      }

      function actualizaInfo(maximoCaracteres) {
        //Insertar código aqui
        var caracteres = document.getElementById("texto");
        var num_caracteres = caracteres.value.length;
        var quedan = maximoCaracteres - num_caracteres;
        info.innerHTML = "Maximo 100 caracteres, te quedan: " + quedan;
      }
    </script>
  </head>
  <body>
    <a href="../index.html">Volver</a>
    <div id="info">Máximo 100 caracteres</div>
    <textarea
      id="texto"
      onkeypress="return limita(event, 100);"
      onkeyup="actualizaInfo(100)"
      rows="6"
      cols="30"
    ></textarea>
  </body>
</html>
